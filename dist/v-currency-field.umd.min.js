/*!
 * v-currency-field v3.0.9 
 * (c) 2020 Philipe Augusto <phiny1@gmail.com>
 * Released under the MIT License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("vue")):"function"==typeof define&&define.amd?define(["exports","vue"],t):(e=e||self,t(e.VCurrencyField={},e.Vue))}(this,function(e,t){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function o(e,t){if(null==e)return{};var n,i,r={},u=Object.keys(e);for(i=0;i<u.length;i++)n=u[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}function a(e,t){if(null==e)return{};var n,i,r=o(e,t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(i=0;i<u.length;i++)n=u[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function l(e){var t=e.locale,i=e.currency,r=e.precision,u=e.autoDecimalMode,o=e.valueAsInteger,a="string"==typeof i?{currency:i,style:"currency"}:{minimumFractionDigits:1},l=new Intl.NumberFormat(t,a),c=V(-1,l),s=c.minusSymbol,m=c.prefix,f=Object.assign({},V(123456,l),{minusSymbol:s,negativePrefix:m}),d=2,v=2;return void 0===f.decimalSymbol?d=v=0:"number"==typeof r?d=v=r:"object"!==n(r)||u||o?"string"==typeof i&&(d=l.resolvedOptions().minimumFractionDigits,v=l.resolvedOptions().maximumFractionDigits):(d=r.min||0,v=void 0!==r.max?r.max:20),null!=i&&"object"===n(i)&&(f.prefix=i.prefix||"",f.negativePrefix=""+f.minusSymbol+(i.prefix||""),f.suffix=i.suffix||""),Object.assign({},f,{minimumFractionDigits:d,maximumFractionDigits:v})}function c(e,t,n){if(void 0===n&&(n=!1),"string"==typeof e){e=L(e,t.digits);var i=M(e,t),r=i.split(t.decimalSymbol);if(r.length>2)return null;var u=r[0].replace(new RegExp("\\"+t.groupingSymbol,"g"),"");if(!P(u))return null;var o=u;if(2===r.length){var a=r[1];if(a.length&&!a.match(/^\d+$/g))return null;o+="."+a}return D(Number(R(o)),n,t.minimumFractionDigits)}return null}function s(e,t,n){var i=document.createEvent("CustomEvent");i.initCustomEvent(t,!0,!0,n),e.dispatchEvent(i)}function m(e,t,n,i,r,u){if(void 0===n&&(n=""),"string"==typeof e){var o=M(e,t);if(t.minimumFractionDigits>0&&r)return J(o,t,u);var a=A(o);a&&(o=o.substring(1),a&=u);var l=H(o,a,n,t,i);if(null!=l)return{conformedValue:l};var c=o.split(t.decimalSymbol),s=c[0],m=c.slice(1),f=j(N(s,t.digits)),d=N(m.join(""),t.digits).substr(0,t.maximumFractionDigits),v=m.length>0&&0===d.length,p=""===f&&a&&(n===e.slice(0,-1)||n!==t.negativePrefix);return v||p?{conformedValue:n}:P(f)?{conformedValue:Number((a?"-":"")+f+"."+d),fractionDigits:d}:{conformedValue:""}}return{conformedValue:n}}function f(e,t,n,i,r,u,o,a,l,c){"boolean"!=typeof o&&(l=a,a=o,o=!1);var s="function"==typeof n?n.options:n;e&&e.render&&(s.render=e.render,s.staticRenderFns=e.staticRenderFns,s._compiled=!0,r&&(s.functional=!0)),i&&(s._scopeId=i);var m;if(u?(m=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(u)},s._ssrRegister=m):t&&(m=o?function(){t.call(this,c(this.$root.$options.shadowRoot))}:function(e){t.call(this,a(e))}),m)if(s.functional){var f=s.render;s.render=function(e,t){return m.call(t),f(e,t)}}else{var d=s.beforeCreate;s.beforeCreate=d?[].concat(d,m):[m]}return n}function d(e,t){t&&Object.keys(t).map(function(e){ue[e]=t[e]}),e.component("v-currency-field",me)}t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var v=function(e,t,n){var i=document.createEvent("CustomEvent");i.initCustomEvent(t,!0,!0,n),e.dispatchEvent(i)},p=function(e,t){return e.substring(0,t.length)===t},g=function(e,t){return t&&p(e,t)?e.substr(t.length):e},y=function(e,t){var n=t.prefix,i=t.suffix,r=e.replace(n,"").replace(i,"");return{value:g(r,"-"),negative:p(r,"-")}},b=function(e,t,n){return t&&null!=e?Number(e.toFixed(n).split(".").join("")):e},h=function(e,t,n){return t&&null!=e?Number(e.toFixed(n).split(".").join("")):e},x=function(e,t){var n=t.prefix,i=t.suffix;return n&&(e=e.replace(n,"").replace(n.trim(),"")),i&&(e=e.replace(i,"").replace(i.trim(),"")),e.trim()},$=function(e){return e.replace(new RegExp("^".concat(["\u2212","-","\u2010"].join("|")),"g"),"-")},F=function(e){return $(e).match(new RegExp("^-?\\d+(\\.\\d+)?$"))},O=function(e,t){return t.forEach(function(t,n){e=e.replace(new RegExp(t,"g"),n)}),e},S=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"==typeof e){e=O(e,t.digits);var i=x(e,t),r=i.split(t.decimalSymbol);if(r.length>2)return null;var u=r[0].replace(new RegExp("\\".concat(t.groupingSymbol),"g"),"");if(!F(u))return null;var o=u;if(2===r.length){var a=r[1];if(a.length&&!a.match(/^\d+$/g))return null;o+=".".concat(a)}return h(Number($(o)),n,t.minimumFractionDigits)}return null},V=function(e,t){var n=t.formatToParts(e),i=n.map(function(e){return e.type});return{digits:[0,1,2,3,4,5,6,7,8,9].map(function(e){return e.toLocaleString(t.resolvedOptions().locale)}),prefix:n.slice(0,i.indexOf("integer")).map(function(e){return e.value}).join(""),suffix:n.slice(Math.max(i.lastIndexOf("integer"),i.indexOf("fraction"))+1).map(function(e){return e.value}).join(""),groupingSymbol:-1!==i.indexOf("group")?n[i.indexOf("group")].value:void 0,decimalSymbol:-1!==i.indexOf("decimal")?n[i.indexOf("decimal")].value:void 0,minusSymbol:-1!==i.indexOf("minusSign")?n[i.indexOf("minusSign")].value:void 0}},D=function(e,t,n){return t&&null!=e?Number(e.toFixed(n).split(".").join("")):e},w=function(e,t,n){return t&&null!=e?e/Math.pow(10,n):e},j=function(e){return e.replace(/^0+(0$|[^0])/,"$1")},N=function(e,t){return L(e,t).replace(/\D+/g,"")},E=function(e,t){return(e.match(new RegExp("\\"+t,"g"))||[]).length},I=function(e,t){return e.substring(e.length-t.length,e.length)===t},_=function(e,t){return e.substring(0,t.length)===t},C=function(e,t,n,i){var r=t.prefix,u=t.negativePrefix,o=t.suffix;return i&&(r=o="",u=t.minusSymbol),""+(n?u:r)+e+o},M=function(e,t){var n=t.prefix,i=t.suffix;return n&&(e=e.replace(n,"").replace(n.trim(),"")),i&&(e=e.replace(i,"").replace(i.trim(),"")),e.trim()},R=function(e){return e.replace(new RegExp("^"+["\u2212","-","\u2010"].join("|"),"g"),"-")},A=function(e){return"-"===R(e).charAt(0)},P=function(e){return R(e).match(new RegExp("^-?\\d+(\\.\\d+)?$"))},L=function(e,t){return t.forEach(function(t,n){e=e.replace(new RegExp(t,"g"),n)}),e},k={locale:void 0,currency:"EUR",valueAsInteger:!1,distractionFree:!0,precision:void 0,autoDecimalMode:!1,valueRange:void 0,allowNegative:!0},T=function(e,t){return c(e,l(Object.assign({},k,t)),t.valueAsInteger)},q=function(e,t){return s(e,"format",{value:t})},B=function(e,t){return e.setSelectionRange(t,t)},U=function(e,t,n,i,r){var u=i.prefix,o=i.suffix,a=i.decimalSymbol,l=i.maximumFractionDigits,c=i.groupingSymbol,s=i.digits,m=t.indexOf(a)+1,f=t.length-n;return Math.abs(e.length-t.length)>1&&n<=m?e.indexOf(a)+1:e.substr(n,1)===c&&E(e,c)===E(t,c)+1?e.length-f-1:(!r.autoDecimalMode&&0!==m&&n>m&&N(t.substr(m),s).length-1===l&&(f-=1),r.distractionFree.hideCurrencySymbol?e.length-f:Math.max(e.length-Math.max(f,o.length),0===u.length?0:u.length+1))},G=function(e,t,n,i){var r=i;return t.distractionFree.hideCurrencySymbol&&(r-=e.prefix.length),t.distractionFree.hideGroupingSymbol&&(r-=E(n.substring(0,i),e.groupingSymbol)),Math.max(0,r)},X=function(e,t){return e.match(new RegExp("^(0|[1-9]\\d{0,2}(\\"+t+"?\\d{3})*)$"))},z=function(e,t){var n=t.digits,i=t.decimalSymbol,r=t.groupingSymbol,u=e.split(i);return I(e,i)&&2===u.length&&X(L(u[0],n),r)},H=function(e,t,n,i,r){var u=i.digits,o=i.negativePrefix,a=i.decimalSymbol,l=i.maximumFractionDigits;if(""===e&&t&&n!==(r?i.minusSymbol:o))return C("",i,t,r);if(l>0){if(z(e,i))return C(e,i,t,r);if(_(e,a))return C(""+u[0]+a+N(e.substr(1),u).substr(0,l),i,t,r)}return null},J=function(e,t,n){var i=t.minimumFractionDigits,r=t.digits;if(""===e)return{conformedValue:""};var u=A(e)&&n,o=n&&"-"===e?-0:Number((u?"-":"")+j(N(e,r)))/Math.pow(10,i);return{conformedValue:o,fractionDigits:o.toFixed(i).slice(-i)}},K=function e(t,i){if(t===i)return!0;if(!t||!i||"object"!==n(t)||"object"!==n(i))return!1;var r=Object.keys(t);return r.length===Object.keys(i).length&&(!!r.every(Object.prototype.hasOwnProperty.bind(i))&&r.every(function(n){return e(t[n],i[n])}))},Q=function(e,t,n){var i=n.$CI_DEFAULT_OPTIONS,r="input"===e.tagName.toLowerCase()?e:e.querySelector("input");if(!r)throw new Error("No input element found");var u=Object.assign({},i||k,t),o=u.distractionFree,a=u.autoDecimalMode;"boolean"==typeof o&&(u.distractionFree={hideCurrencySymbol:o,hideNegligibleDecimalDigits:o,hideGroupingSymbol:o}),a?(u.distractionFree.hideNegligibleDecimalDigits=!1,r.setAttribute("inputmode","numeric")):r.setAttribute("inputmode","decimal");var c=l(u);return r.$ci=Object.assign({},r.$ci||{},{options:u,currencyFormat:c}),r},W=function(e,t){if(t){var n=t.min,i=t.max;void 0!==n&&e<n&&(e=n),void 0!==i&&e>i&&(e=i)}return e},Y=function(e,t,n){var i=e.$ci.options,r=i.valueRange,u=i.locale,o=i.valueAsInteger,a=e.$ci.currencyFormat,l=a.maximumFractionDigits,c=a.minimumFractionDigits;null!=t&&(t=W(t,r),t=new Intl.NumberFormat(u,{minimumFractionDigits:c,maximumFractionDigits:l}).format(t)),ee(e,t),n&&s(e,"change",{numberValue:D(e.$ci.numberValue,o,l)})},Z=function(e,t,n){if(null!=t){var i=e.$ci,r=i.focus,u=i.options,o=u.allowNegative,a=u.autoDecimalMode,l=u.distractionFree,s=u.locale,f=i.currencyFormat,d=i.previousConformedValue,v=r&&l.hideCurrencySymbol,p=m(t,f,d,v,a,o),g=p.conformedValue,y=p.fractionDigits;if("number"==typeof g){var b=f.maximumFractionDigits,h=f.minimumFractionDigits;r&&(h=b),h=n?y.replace(/0+$/,"").length:Math.min(h,y.length);var x=new Intl.NumberFormat(s,{useGrouping:!(r&&l.hideGroupingSymbol),minimumFractionDigits:h,maximumFractionDigits:b}).format(Math.abs(g)),$=0===g&&1/g<0;e.value=C(x,f,$||g<0,v),e.$ci.numberValue=g}else e.value=g,e.$ci.numberValue=c(e.value,f)}else e.value=e.$ci.numberValue=null;e.$ci.previousConformedValue=e.value},ee=function(e,t,n){void 0===n&&(n=!1),Z(e,t,n);var i=e.$ci,r=i.numberValue,u=i.currencyFormat,o=i.options;r=D(r,o.valueAsInteger,u.maximumFractionDigits),s(e,"input",{numberValue:r})},te=function(e){e.addEventListener("input",function(t){if(!t.detail){var n=e.value,i=e.selectionStart,r=e.$ci,u=r.currencyFormat,o=r.options;ee(e,n),e.$ci.focus&&B(e,U(e.value,n,i,u,o))}},{capture:!0}),e.addEventListener("format",function(t){var n=e.$ci,i=n.currencyFormat,r=n.options,u=n.numberValue,o=w(t.detail.value,r.valueAsInteger,i.maximumFractionDigits);o!==u&&Y(e,o)}),e.addEventListener("focus",function(){e.$ci.oldValue=e.$ci.numberValue,e.$ci.focus=!0;var t=e.$ci.options.distractionFree,n=t.hideCurrencySymbol,i=t.hideGroupingSymbol,r=t.hideNegligibleDecimalDigits;(n||i||r)&&setTimeout(function(){var t=e.value,n=e.selectionStart,i=e.selectionEnd;ee(e,e.value,r),Math.abs(n-i)>0?e.setSelectionRange(0,e.value.length):B(e,G(e.$ci.currencyFormat,e.$ci.options,t,n))})}),e.addEventListener("blur",function(){e.$ci.focus=!1,Y(e,e.$ci.numberValue,e.$ci.oldValue!==e.$ci.numberValue)})},ne={bind:function(e,n,i){var r=n.value,u=i.context,o=Q(e,r,u);t.nextTick(function(){var e=o.value,t=o.$ci,n=t.currencyFormat,i=t.options;e&&Y(o,w(c(e,n),i.valueAsInteger,n.maximumFractionDigits))}),te(o)},componentUpdated:function(e,t,n){var i=t.value,r=t.oldValue,u=n.context;if(!K(i,r)){var o=Q(e,i,u);Y(o,o.$ci.numberValue,i.valueAsInteger!==r.valueAsInteger)}}},ie={render:function(e){var t=this;return e("input",{domProps:{value:this.formattedValue},directives:[{name:"currency",value:this.options}],on:Object.assign({},this.$listeners,{change:function(e){e.detail&&t.$emit("change",e.detail.numberValue),t.formattedValue=t.$el.value},input:function(e){e.detail&&t.value!==e.detail.numberValue&&t.$emit("input",e.detail.numberValue),t.formattedValue=t.$el.value}})})},directives:{currency:ne},name:"CurrencyInput",props:{value:{type:Number,default:null},locale:{type:String,default:void 0},currency:{type:[String,Object],default:void 0},distractionFree:{type:[Boolean,Object],default:void 0},precision:{type:[Number,Object],default:void 0},autoDecimalMode:{type:Boolean,default:void 0},valueAsInteger:{type:Boolean,default:void 0},valueRange:{type:Object,default:void 0},allowNegative:{type:Boolean,default:void 0}},data:function(){return{formattedValue:null}},created:function(){var e=l(this.options),t=e.minimumFractionDigits,n=e.maximumFractionDigits;this.formattedValue="number"==typeof this.value?this.value.toLocaleString(this.options.locale,{minimumFractionDigits:t,maximumFractionDigits:n}):null},computed:{options:function(){var e=this,t=Object.assign({},this.$CI_DEFAULT_OPTIONS||k);return Object.keys(k).forEach(function(n){void 0!==e[n]&&(t[n]=e[n])}),t}},watch:{value:"setValue"},methods:{setValue:function(e){q(this.$el,e)}}},re={install:function(e,t){void 0===t&&(t={});var n=t.componentName;void 0===n&&(n=ie.name);var i=t.directiveName;void 0===i&&(i="currency");var r=t.globalOptions;void 0===r&&(r={}),e.prototype.$CI_DEFAULT_OPTIONS=Object.assign({},k,r),e.component(n,ie),e.directive(i,ne),e.prototype.$parseCurrency=function(e,t){return void 0===t&&(t={}),T(e,Object.assign({},r,t))}}};"undefined"!=typeof window&&window.Vue&&window.Vue.use(re);var ue={locale:void 0,decimalLength:2,autoDecimalMode:!0,min:null,max:null,defaultValue:0,valueAsInteger:!1,allowNegative:!0},oe={name:"VCurrencyField",props:{value:{type:[Number,String],default:function(){return null}},locale:{type:String,default:function(){return ue.locale}},decimalLength:{type:Number,default:function(){return ue.decimalLength}},autoDecimalMode:{type:Boolean,default:function(){return ue.autoDecimalMode}},min:{type:Number,default:function(){return ue.min}},max:{type:Number,default:function(){return ue.max}},defaultValue:{type:Number,default:function(){return ue.defaultValue}},valueAsInteger:{type:Boolean,default:function(){return ue.valueAsInteger}},allowNegative:{type:Boolean,default:function(){return ue.allowNegative}}},directives:{CurrencyDirective:ne},data:function(){return{currency:null,formattedValue:this.value}},mounted:function(){this.$refs.textfield.resetValidation(),v(this.$el.querySelector("input"),"defaultValue"),this.formattedValue="number"==typeof this.value?this.value.toLocaleString(this.locale,{minimumFractionDigits:this.decimalLength,maximumFractionDigits:this.decimalLength}):null},computed:{attrs:function(){var e=this.$attrs;e.value;return a(e,["value"])},distractionFree:function(){return this.decimalLength>0&&!this.autoDecimalMode},decimalMode:function(){return this.decimalLength>0&&this.autoDecimalMode},valueRange:function(){return this.min||this.max?{min:this.min,max:this.max}:void 0}},methods:{listeners:function(){var e=this,t=this.$listeners;t.input;return u(u({},a(t,["input"])),{},{defaultValue:function(){var t=e.$el.querySelector("input");e.value||null===e.defaultValue||void 0===e.defaultValue||t.$ci.focus||(t.$ci.numberValue=e.valueAsInteger&&e.defaultValue?e.defaultValue*Math.pow(10,e.decimalLength):e.defaultValue,v(t,"blur"))},input:function(){var t=e.$el.querySelector("input");null!=t.$ci.numberValue&&void 0!=t.$ci.numberValue||null===e.defaultValue||t.$ci.focus||(t.$ci.numberValue=e.defaultValue,v(t,"blur")),t.$ci&&e.value!==t.$ci.numberValue&&e.$emit("input",b(t.$ci.numberValue,e.valueAsInteger,e.decimalLength)),e.formattedValue=t.value},keyup:function(t){if("-"===t.key||"+"===t.key){var n=y(e.$el.querySelector("input").value,{prefix:"",suffix:""}),i=n.value,r=n.negative,u=i.split(e.$el.querySelector("input").$ci.currencyFormat.decimalSymbol),o=S(i,e.$el.querySelector("input").$ci.currencyFormat),a=null;if(2===u.length){var l=u[1];a=new Intl.NumberFormat(e.locale,{minimumFractionDigits:l.length,maximumFractionDigits:l.length}).format(o)}var c=a||o;"-"!==t.key||r||null===c||(e.$el.querySelector("input").value="-".concat(c),v(e.$el.querySelector("input"),"input")),"+"===t.key&&r&&null!==c&&(e.$el.querySelector("input").value="".concat(c),v(e.$el.querySelector("input"),"input"))}}})}}},ae=f;const le=oe;var ce=function(){var e=this,t=e.$createElement;return(e._self._c||t)("v-text-field",e._g(e._b({directives:[{name:"currency-directive",rawName:"v-currency-directive",value:{currency:e.currency,locale:e.locale,distractionFree:e.distractionFree,precision:e.decimalLength,autoDecimalMode:e.decimalMode,valueRange:e.valueRange,allowNegative:e.allowNegative,valueAsInteger:e.valueAsInteger},expression:"{currency, locale, distractionFree, precision: decimalLength, autoDecimalMode: decimalMode, valueRange, allowNegative, valueAsInteger}"}],ref:"textfield",attrs:{type:"tel"},scopedSlots:e._u([e._l(e.$slots,function(t,n){return{key:n,fn:function(){return[e._t(n)]},proxy:!0}})],null,!0),model:{value:e.formattedValue,callback:function(t){e.formattedValue=t},expression:"formattedValue"}},"v-text-field",e.attrs,!1),e.listeners()))},se=[];var me=ae({render:ce,staticRenderFns:se},void 0,le,void 0,!1,void 0,void 0,void 0);"undefined"!=typeof window&&window.Vue&&window.Vue.use(d),e.VCurrencyField=me,e.default=d,e.options=ue,e.version="3.0.9",Object.defineProperty(e,"__esModule",{value:!0})});